<ion-navbar *navbar>
    <ion-title>Reset password</ion-title>
</ion-navbar>

<ion-content>
    <ion-list padding>

        <form #signupForm="ngForm" novalidate>
            <ion-item>
                <ion-label primary>Username</ion-label>
                <ion-input [(ngModel)]="signup.username" ngControl="username" placeholder="Your email address" type="email" #username="ngForm" required>
                </ion-input>
            </ion-item>
            <p [hidden]="username.valid || submitted == false" danger padding-left>
                Username is required
            </p>

            <ion-item>
                <ion-label primary>New Password</ion-label>
                <ion-input [(ngModel)]="signup.password" ngControl="password" type="password" placeholder="At least 5 characters" #password="ngForm" pattern=".{5,}" required>
                </ion-input>
            </ion-item>
            <p [hidden]="password.valid || submitted == false" danger padding-left>
                Password must be at least 5 characters
            </p>

            <ion-item [hidden]="!verificode">
                <ion-label primary>Verify Code</ion-label>
                <ion-input [(ngModel)]="inputverifiedcode" ngControl="inputverifiedcode" type="text">
                </ion-input>
            </ion-item>
            <p [hidden]="!verifystate" danger padding-left>
                incorrect verifycode
            </p>

            <p [hidden]="success!=1" secondary outline padding-left>
                We have sent you an email. Click the link inside and your new password will be activated.
            </p>

            <p [hidden]="!serverErrors.unknown" danger padding-left>
                Unable to reset your password. Check your internet connection or try again later
            </p>

            <div padding>
                <button [hidden]="success!=0" (click)="onverify(signupForm)" type="submit" primary block>Get verify code</button>
                <button [hidden]="success!=1" (click)="onReset(signupForm)" type="submit" primary block>Send reset code</button>
                <button [hidden]="success!=2" (click)="onLogin(signupForm)" type="submit" secondary block>Log in</button>
            </div>
        </form>
    </ion-list>
</ion-content>

